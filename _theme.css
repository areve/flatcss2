/* _theme.css */

:root {
  --theme__link__color: --core__button-submit__background-color;
  --theme__table__color: lighten(var(--theme__link__color), 50%);
  --theme__table__box-shadow: 1px 1px 10px rgba(0, 0, 0, 0.12);

  --theme__general__border-radius: calc(1em * 1 / 3);
  --theme__general__box-shadow: 1px 1px 10px rgba(0, 0, 0, 0.3);

  --theme__control__border-color--focus: var(--theme__link__color);
  --theme__control__border-width--focus: 4px;
  --theme__control__box-shadow--focus: 0 0 0
    --theme__control__border-width--focus
    rgba(var(--theme__control__border-color--focus), 0.5);
}

@mixin theme-radius {
  .flat.bevels & {
    border-radius: var(--theme__general__border-radius);
  }
}

@mixin transition {
  .flat.transitions & {
    transition: all 0.3s;
  }
}

@mixin shadow {
  .flat.shadows & {
    box-shadow: var(--theme__general__box-shadow);
  }
}

@mixin focus-border {
  .flat.focus-borders & {
    outline: none;
    box-shadow: var(--theme__control__box-shadow--focus);
    z-index: 1;

    /* @supports (-ms-ime-align: auto) {
      // ms
      box-shadow: none;
      outline: var(--theme__control__border-width--focus) solid
        rgba(var(--theme__control__border-color--focus), 0.5);
    } */
  }
}

@mixin button-colors {
  .flat.styling & {
    background-color: var(--core__button__background-color);
    color: var(--core__button__color);
  }
}

/* links */
a:not(.button) {
  @include transition;
  .flat.styling & {
    color: var(--theme__link__color);
    text-decoration: none;
  }
  &:active,
  &:hover {
    .flat.styling & {
      text-decoration: underline;
    }
  }
  &:focus {
    @include focus-border;
  }
}

/* buttons */
input[type="submit"],
input[type="reset"],
input[type="button"],
select,
button {
  @include theme-radius;
  @include transition;
  @include shadow;
  &:focus {
    @include focus-border;
  }
}

label.button:focus-within {
  @include focus-border;
  @include lowlight;
}

input[type="file"]::-webkit-file-upload-button {
  @include theme-radius;
  @include transition;
  @include shadow;
  @include button-colors;
}

input[type="file"]:focus::-webkit-file-upload-button {
  @include lowlight;
}

input[type="range"] {
  &::-webkit-slider-thumb {
    @include transition;
    @include theme-radius;
    @include shadow;
  }
  &::-moz-range-thumb {
    @include transition;
    @include theme-radius;
    @include shadow;
  }
  &::-ms-thumb {
    @include transition;
    @include theme-radius;
    @include shadow;
  }
}

/* fields */

output,
meter,
textarea,
input:not([type]),
input[type="text"],
input[type="search"],
input[type="range"],
input[type="tel"],
input[type="url"],
input[type="color"],
input[type="email"],
input[type="password"],
input[type="date"],
input[type="month"],
input[type="week"],
input[type="time"],
input[type="local"],
input[type="number"],
input[type="file"] {
  @include theme-radius;
  @include transition;
  &:focus {
    @include focus-border;
  }
}

input[type="image"],
input[type="color"] {
  @include shadow;
}

input[type="checkbox"],
input[type="radio"],
input[type="image"] {
  @include transition;
  &:focus {
    @include focus-border;
  }
}

input[type="checkbox"]:before,
input[type="checkbox"]:after,
input[type="radio"]:before,
input[type="radio"]:after {
  @include transition;
}

progress[value] {
  &::-moz-progress-bar {
    @include theme-radius;
  }
  &::-webkit-progress-bar {
    @include theme-radius;
  }
  &::-webkit-progress-value {
    @include theme-radius;
  }
}

input[type="image"] {
  &[value]::-moz-progress-bar {
    @include transition;
  }
  &[value]::-webkit-progress-bar {
    @include transition;
  }
}

/* things that just want a radius */

pre,
code,
var,
samp,
kbd,
tt,
mark {
  @include theme-radius;
}

/* figure theme */
figure {
  @include theme-radius;
  @include shadow;
}

figcaption {
  .flat.styling & {
    margin-bottom: var(--core__container__padding-size);
  }
}

blockquote,
address {
  .flat.styling & {
    font-style: italic;
  }
}

body {
  .flat.styling & {
    background-color: var(--core__background-color);
    color: var(--core__color);
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    font-size: 1em;
    max-width: 960px;
    margin: auto;
    padding: 3em 3%;
  }
}

/* forms */
fieldset {
  @include theme-radius;
  @include shadow;
  .flat.styling & {
    padding: var(--core__container__padding-size);
    border: var(--core__border);
  }
}

legend {
  @include theme-radius;
  @include shadow;
  .flat.styling & {
    background-color: var(--core__background-color);
    border: var(--core__border);
    padding: var(--core__text__padding);
  }
}

/* table */
table {
  shadows & {
    box-shadow: var(--theme__table__box-shadow);
  }
  .flat.styling & {
    border: var(--core__border);
  }
}
